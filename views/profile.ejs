<!doctype html>
<html>

<head>
    <title>SPA Site</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">

        <div class="page-header text-center">
            <h1>Profile Page</h1>
            <a href="/logout" class="btn btn-default btn-sm">Logout</a>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <h2>Book an Appointment</h2>
                <form action="/appointment" method="post">

                    <div class="form-group">
                        <label for="fullName">Full Name:</label>
                        <input type="text" id="fullName" name="fullName" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address:</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number:</label>
                        <input type="tel" id="phone" name="phone">
                    </div>

                    <div class="form-group">
                        <label for="appointmentDate">Appointment Date:</label>
                        <input type="date" id="appointmentDate" name="appointmentDate" required>
                    </div>

                    <div class="form-group">
                        <label for="appointmentTime">Preferred Time Slot:</label>
                        <select id="appointmentTime" name="appointmentTime" required>
                            <option value="">Select a time</option>
                            <option value="09:00">09:00 AM</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="13:00">01:00 PM</option>
                            <option value="14:00">02:00 PM</option>
                            <option value="15:00">03:00 PM</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="service">Service Needed:</label>
                        <textarea id="service" name="service" rows="3"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">Schedule Appointment</button>
                </form>
            </div>

            <div class="col-sm-6">
                <h2>Upcoming Appointments</h2>
                <ul class="list-group">
                    <!-- EJS loop to display appointments -->
                    <% if (appointments && appointments.length> 0) { %>
                        <% for(var i=0; i<appointments.length; i++) {%>
                            <li class="list-group-item">
                                <strong>
                                    <%= appointments[i].fullName %>
                                </strong>
                                <br>
                                Email: <%= appointments[i].email %>
                                    <br>
                                    Date: <%= appointments[i].appointmentDate %> @ <%= appointments[i].appointmentTime
                                            %>
                                            <br>
                                            Service: <%= appointments[i].service %>

                                                <!-- ADDED: Delete/Update functionality buttons -->
                                                <div class="mt-2">
                                                    <!-- Delete Button -->
                                                    <button class="btn btn-danger btn-sm delete-btn"
                                                        data-id="<%= appointments[i]._id %>">
                                                        <i class="fa fa-trash" aria-hidden="true"></i> Delete
                                                    </button>
                                                    <!-- Update Button (Reschedule) -->
                                                    <button class="btn btn-info btn-sm update-btn"
                                                        data-id="<%= appointments[i]._id %>"
                                                        data-current-date="<%= appointments[i].appointmentDate %>"
                                                        data-current-time="<%= appointments[i].appointmentTime %>">
                                                        <i class="fa fa-pencil" aria-hidden="true"></i> Reschedule
                                                    </button>
                                                </div>
                            </li>
                            <% } %>
                                <% } else { %>
                                    <li class="list-group-item">No appointments scheduled yet.</li>
                                    <% } %>
                </ul>
            </div>
        </div>
    </div>


    <script src="main.js"></script>

</body>

</html>